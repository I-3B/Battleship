(this["webpackJsonptest-react"]=this["webpackJsonptest-react"]||[]).push([[0],[,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(5),u=r.n(o),c=(r(11),r(12),r(2)),i=(r(13),r(14),r(0)),l=function(e){return Object(i.jsx)("div",{id:e.id,className:"cell"})},s=function(e){var t=Object(n.useState)([]),r=Object(c.a)(t,2),a=r[0],o=r[1];return Object(n.useEffect)((function(){for(var t=[],r=0;r<k;r++)for(var n=0;n<k;n++)t.push(Object(i.jsx)(l,{id:e.player.user+r+""+n},e.player.user+r+""+n));o(t)}),[]),Object(i.jsx)("div",{id:e.player.user,className:"board",onMouseUp:function(t){e.gameStarted&&e.boardClickedAt(t.target)},children:a})},d=(r(16),function(e){for(var t=Array.from(Array(e),(function(){return new Array(e)})),r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)t[r][n]={usedBy:null,hit:!1,available:!0};var a=[];return{checkCell:function(e,r){return t[e][r].hit?"attacked":null===t[e][r].usedBy?"empty":"ship"},canPlaceShipAt:function(e,r,n,a){if("x"===n)for(var o=r;o<a+r;o++){if(!t[e])return!1;if(!t[e][o]||!t[e][o].available)return!1}else{if("y"!==n)throw new Error("wrong shipDirection argument");for(var u=e;u<a+e;u++)if(!t[u]||!t[u][r].available)return!1}return!0},place:function(e,r,n,o){if(a.push(o),"y"===n){for(var u=e;u<e+o.getLength();u++)t[u][r].usedBy=o;for(var c=e-1;c<e+o.getLength()+1;c++)t[c]&&(t[c][r]&&(t[c][r].available=!1),t[c][r-1]&&(t[c][r-1].available=!1),t[c][r+1]&&(t[c][r+1].available=!1))}else if("x"===n){for(var i=r;i<r+o.getLength();i++)t[e][i].usedBy=o;for(var l=r-1;l<r+o.getLength()+1;l++)t[e]&&t[e][l]&&(t[e][l].available=!1),t[e-1]&&t[e-1][l]&&(t[e-1][l].available=!1),t[e+1]&&t[e+1][l]&&(t[e+1][l].available=!1)}},receiveAttack:function(e,r){var n=t[e][r];return n.hit=!0,null!==n.usedBy&&n.usedBy.hit(),!0},checkLose:function(){var e=!0;return a.forEach((function(t){t.isSunk()||(e=!1)})),e},getBoard:function(){return t}}}),f=function(e,t){var r=null;return{user:t,board:d(e),setEnemy:function(e){r=e},AIAttack:function(){var t=[Math.floor(Math.random()*e),Math.floor(Math.random()*e)],n=t[0],a=t[1],o=r.board.checkCell(n,a);if("empty"===o||"ship"===o)r.board.receiveAttack(n,a);else if("attacked"!==o)throw new Error(o);return[n,a,o]}}},h=function(e,t){var r=function(e,t){"ship"===t?e.setAttribute("style","background-color:red"):"empty"===t&&e.setAttribute("style","background-color:wheat")};return{AIAttack:function(){for(var n=t.AIAttack(),a=Object(c.a)(n,3),o=a[0],u=a[1],i=a[2];"attacked"===i;){var l=t.AIAttack(),s=Object(c.a)(l,3);o=s[0],u=s[1],i=s[2]}for(r(document.querySelector("#"+e.user+o+u),i);("ship"===i||"attacked"===i)&&!e.board.checkLose();){var d=t.AIAttack(),f=Object(c.a)(d,3);o=f[0],u=f[1],i=f[2],r(document.querySelector("#"+e.user+o+u),i)}},humanAttacked:function(e){var n=[Number(e.id[e.id.length-2]),Number(e.id[e.id.length-1])],a=n[0],o=n[1],u=t.board,c=u.checkCell(a,o);return r(e,c),"ship"!==c&&"empty"!==c||u.receiveAttack(a,o),c}}},b=r(6),m=function(e){var t=e,r=0;return{isSunk:function(){return r===t},getLength:function(){return t},hit:function(){return r++},getHits:function(){return r}}},v=function(e,t,r){var n=function(){var e,r=[],n=Object(b.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r.push(m(a))}}catch(o){n.e(o)}finally{n.f()}return r}();if("human"===e.user){var a="aliceblue",o="green",u=!1,c=!1,i=0,l=document.querySelector("#human"),s=function t(s){if(n[i])switch(s.type){case"mouseover":!function(t,r){c=u;var n=u?"y":"x",a=[Number(t.id[t.id.length-2]),Number(t.id[t.id.length-1])],i=a[0],l=a[1],s=e.board.canPlaceShipAt(i,l,n,r)?"yellowgreen":"orange";if("x"===n)for(var d=l;d<r+l&&d<k;d++)document.querySelector("#human"+i+d).style.backgroundColor!==o&&(document.querySelector("#human"+i+d).style.backgroundColor=s);else if("y"===n)for(var f=i;f<r+i&&f<k;f++)document.querySelector("#human"+f+l).style.backgroundColor!==o&&(document.querySelector("#human"+f+l).style.backgroundColor=s)}(s.target,n[i].getLength());break;case"mouseout":!function(e,t){var r=c?"y":"x",n=[Number(e.id[e.id.length-2]),Number(e.id[e.id.length-1])],u=n[0],i=n[1];if("x"===r)for(var l=i;l<t+i&&l<k;l++)document.querySelector("#human"+u+l).style.backgroundColor!==o&&(document.querySelector("#human"+u+l).style.backgroundColor=a);else if("y"===r)for(var s=u;s<t+u&&s<k;s++)document.querySelector("#human"+s+i).style.backgroundColor!==o&&(document.querySelector("#human"+s+i).style.backgroundColor=a)}(s.target,n[i].getLength());break;case"mouseup":!function(t,r){var n=c?"y":"x",a=[Number(t.id[t.id.length-2]),Number(t.id[t.id.length-1])],u=a[0],l=a[1];if(e.board.canPlaceShipAt(u,l,n,r.getLength())){if(e.board.place(u,l,n,r),"x"===n)for(var s=l;s<r.getLength()+l&&s<k;s++)document.querySelector("#human"+u+s).style.backgroundColor=o;else if("y"===n)for(var d=u;d<r.getLength()+u&&d<k;d++)document.querySelector("#human"+d+l).style.backgroundColor=o;i++}}(s.target,n[i])}else l.removeEventListener("mouseover",t,!0),l.removeEventListener("mouseout",t,!0),l.removeEventListener("mouseup",t,!0),document.removeEventListener("keyup",t,!0),r()};document.addEventListener("keyup",(function(e){"r"===e.key||e.key,u=!u})),l.addEventListener("mouseover",s,!0),l.addEventListener("mouseout",s,!0),l.addEventListener("mouseup",s,!0)}else if("AI"===e.user)for(var d=0;n[d];){var f=void 0,h=void 0,v=void 0;do{var g=[Math.floor(Math.random()*k),Math.floor(Math.random()*k)];f=g[0],h=g[1],v=Math.round(Math.random())?"x":"y"}while(!e.board.canPlaceShipAt(f,h,v,n[d].getLength()));e.board.place(f,h,v,n[d]),d++}},g=[4,3,3,2,2,2,1,1,1,1],y=function(){var e=Object(n.useState)("Place your ships, press R to rotate ship"),t=Object(c.a)(e,2),r=t[0],a=t[1],o=Object(n.useState)({color:"rgba(0, 0, 0, 1)"}),u=Object(c.a)(o,2),l=u[0],d=u[1],b=Object(n.useState)(f(k,"human",!0)),m=Object(c.a)(b,2),y=m[0],j=m[1],p=Object(n.useState)(f(k,"AI",!1)),A=Object(c.a)(p,2),O=A[0],S=A[1],L=Object(n.useState)(!1),x=Object(c.a)(L,2),C=x[0],E=x[1],I=h(y,O),w=Object(n.useState)("human"),q=Object(c.a)(w,2),M=q[0],N=q[1],B=function(e,t){var r=Object.assign({},e);return r.setEnemy(t),v(r,g,P),r},P=function(){E(!0),T("Start attacking the enemy board.")},T=function(e){d({color:"rgba(0, 0, 0, 0)"}),setTimeout((function(){a(e)}),500),setTimeout((function(){d({color:"rgba(0, 0, 0, 1)"})}),500)},F=function(e){return e.board.checkLose()},D=function(e){"human"===e.user?T("It's your win!!!"):T("It's the computer win :(")},J=function(){setTimeout((function(){document.location.reload()}),5e3)},H=function(e){e.id.includes("AI")&&"human"===M&&("empty"===I.humanAttacked(e)&&N((function(){return"AI"})));F(O)&&(D(y),E(!1),J())};return Object(n.useEffect)((function(){j(B(y,O)),S(B(O,y))}),[]),Object(n.useEffect)((function(){C&&("AI"===M?(I.AIAttack(),N((function(){return"human"}))):"human"===M&&T("Your turn"),F(y)&&(D(O),E(!1),J()))}),[M,C]),Object(i.jsxs)("main",{id:"game",children:[Object(i.jsx)("div",{id:"message",style:l,children:r}),Object(i.jsxs)("div",{id:"boards-container",children:[Object(i.jsx)(s,{player:y,enemy:O.user,boardClickedAt:H,gameStarted:C}),Object(i.jsx)(s,{player:O,enemy:y.user,boardClickedAt:H,gameStarted:C})]})]})},k=10,j=function(){return Object(i.jsx)("div",{id:"app",children:Object(i.jsx)(y,{})})},p=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,18)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,u=t.getTTFB;r(e),n(e),a(e),o(e),u(e)}))};u.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(j,{})}),document.getElementById("root")),p()}],[[17,1,2]]]);
//# sourceMappingURL=main.2718d388.chunk.js.map